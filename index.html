<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <!-- Подключаем стили для корректного отображения -->
    <link rel="stylesheet" href="styles.css">
    <!-- Подключаем скрипт для model-viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
</head>
<body>
    <!-- Вставляем 3D-модель -->
    
    <model-viewer id="transform" src="cube.glb" scale="1 0.8 0.01" ar ar-placement="wall" ar-modes=" webxr  quick-look" camera-controls touch-action="pan-y" alt="A 3D model of some wall art"></model-viewer>
    <div class="controls">
      <div>
          Scale: X: <input id="x" value="1" size="3" class="number">,
          Y: <input id="y" value="0.8" size="3" class="number">,
         
        </div>
       
        <select id="diffuse">
          <option>None</option>
          <option value="t (1).jpg">Person</option>
          <option value="t (2).jpg">Dream</option>
          <option value="t (3).jpg">City</option>
        </select>
        <p>Custom texture name</p>
    <p id="texture-name">None</p>
    <p>Image name from file name</p>
    <p id="image-name">None</p>
  </div>
    <script>
        const modelViewerTransform = document.querySelector("model-viewer#transform");
    
        const x = document.querySelector('#x');
        const y = document.querySelector('#y');
   
      
    
        const updateScale = () => {
          modelViewerTransform.scale = `${x.value} ${y.value} 0.01}`;
        };
        
    
        x.addEventListener('input', () => {
          updateScale();
        });
        y.addEventListener('input', () => {
          updateScale();
        });
       
        </script>
<script type="module">
    const modelViewerTexture = document.querySelector("model-viewer#transform");
    const textureName = document.querySelector('#texture-name');
    const imageName = document.querySelector('#image-name');
   
    modelViewerTexture.addEventListener("load", () => {
    
      const material = modelViewerTexture.model.materials[0];
    
      const createAndApplyTexture = async (channel, event) => {
    const texture = await modelViewerTexture.createTexture(event.target.value);
    if (channel.includes('base') || channel.includes('metallic')) {
      material.pbrMetallicRoughness[channel].setTexture(texture);
    } else {
      material[channel].setTexture(texture);
    }
  }
    
      document.querySelector('#diffuse').addEventListener('input', (event) => {
        createAndApplyTexture('baseColorTexture', event);
      });
    });

    </script>
</body>

</html>
